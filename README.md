# Telegram –ë–æ—Ç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ü–æ–¥–¥–µ—Ä–∂–∫–∏ –ë–∞–Ω–∫–∞

–ë–æ—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–∫–µ—Ç–æ–≤, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

## –û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```mermaid
flowchart LR
    style U fill:#E9ECEF,stroke:#343A40,stroke-width:2px
    style B fill:#E9ECEF,stroke:#343A40,stroke-width:2px
    style GM fill:#E9ECEF,stroke:#343A40,stroke-width:2px
    style DB fill:#E9ECEF,stroke:#343A40,stroke-width:2px
    style A fill:#E9ECEF,stroke:#343A40,stroke-width:2px
    style C fill:#E9ECEF,stroke:#343A40,stroke-width:2px
    style AN fill:#E9ECEF,stroke:#343A40,stroke-width:2px

    U["üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"] --> |"‚úâÔ∏è –°–æ–æ–±—â–µ–Ω–∏–µ"| B["ü§ñ –ë–æ—Ç"]
    B --> |"üìù –°–æ–∑–¥–∞–µ—Ç"| DB["üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"]
    B --> |"üîî –£–≤–µ–¥–æ–º–ª—è–µ—Ç"| GM["üë• –ì—Ä—É–ø–ø–∞<br/>–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"]
    B --> |"üîî –£–≤–µ–¥–æ–º–ª—è–µ—Ç"| A["üë®‚Äçüíº –ê–¥–º–∏–Ω—ã"]
    C["üëë CEO"] --> |"üë• –£–ø—Ä–∞–≤–ª—è–µ—Ç"| A
    C --> |"üìä –°–º–æ—Ç—Ä–∏—Ç<br/>—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"| AN["üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞"]
    AN --> |"üìë Excel"| C
    A --> |"‚úÖ –ë–µ—Ä—É—Ç"| DB
    A --> |"üí¨ –û—Ç–≤–µ—á–∞—é—Ç"| U
```

## –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è

```mermaid
sequenceDiagram
    participant U as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant B as ü§ñ –ë–æ—Ç
    participant A as üë®‚Äçüíº –ê–¥–º–∏–Ω
    participant DB as üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    participant G as üë• –ì—Ä—É–ø–ø–∞

    U->>+B: ‚úâÔ∏è –°–æ–æ–±—â–µ–Ω–∏–µ
    B->>DB: üìù –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
    B->>G: üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    B->>A: üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤
    A->>B: ‚úÖ –í–∑—è—Ç–∏–µ —Ç–∏–∫–µ—Ç–∞
    A->>U: üí¨ –û—Ç–≤–µ—Ç
    Note over B,DB: ‚è∞ –ï—Å–ª–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ 30 –º–∏–Ω—É—Ç
    B->>A: ‚ö†Ô∏è –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
    A->>B: üîí –ó–∞–∫—Ä—ã—Ç–∏–µ —Ç–∏–∫–µ—Ç–∞
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```mermaid
classDiagram
    direction LR
    class User {
        +id: int
        +full_name: str
        +username: str
        +contact: str
    }
    class Ticket {
        +id: int
        +user_id: int
        +status: str
        +message_data: str
        +created_at: datetime
        +taken_at: datetime
        +closed_at: datetime
        +admin_id: int
    }
    class Admin {
        +id: int
        +username: str
        +is_ceo: bool
        +stats: dict
    }
    
    User "1" --o "*" Ticket : —Å–æ–∑–¥–∞–µ—Ç
    Admin "1" --o "*" Ticket : –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
PRIVATE_GROUP_ID=–∞–π–¥–∏_–≥—Ä—É–ø–ø—ã_–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ª—é–±–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ç–∏–∫–µ—Ç

### –ê–¥–º–∏–Ω—ã
- `/admin` - –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ö–Ω–æ–ø–∫–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
  - üìã –û—Ç–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã
  - üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
  - üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è CEO)

### –ö–æ–º–∞–Ω–¥—ã –≤ –≥—Ä—É–ø–ø–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `/stats` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/my_stats` - –õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–¥–º–∏–Ω–∞
- `/admin_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º
- `/export_day` - –≠–∫—Å–ø–æ—Ä—Ç –∑–∞ –¥–µ–Ω—å
- `/export_week` - –≠–∫—Å–ø–æ—Ä—Ç –∑–∞ –Ω–µ–¥–µ–ª—é
- `/export_month` - –≠–∫—Å–ø–æ—Ä—Ç –∑–∞ –º–µ—Å—è—Ü

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–†–æ–ª–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ê–¥–º–∏–Ω, CEO
- **–¢–∏–∫–µ—Ç—ã**: –°–æ–∑–¥–∞–Ω–∏–µ, –≤–∑—è—Ç–∏–µ –≤ —Ä–∞–±–æ—Ç—É, –æ—Ç–≤–µ—Ç, –∑–∞–∫—Ä—ã—Ç–∏–µ
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: 
  - –ù–æ–≤—ã–µ —Ç–∏–∫–µ—Ç—ã
  - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö (30 –º–∏–Ω—É—Ç)
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**:
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–∫–µ—Ç–∞–º
  - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∏ —Ä–µ—à–µ–Ω–∏—è
  - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel (–¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
  - –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö
  - –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω–æ–≤

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.9+
- Aiogram 3.13.1
- SQLite (aiosqlite)
- Pandas + XlsxWriter –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
- APScheduler –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π